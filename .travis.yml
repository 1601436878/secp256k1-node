sudo: false
os:
  - linux
language: node_js
node_js:
  - 0.11
  - 0.12
  - 4
  - 5
matrix:
# include don't work with addons?
  exclude:
    - node_js: 0.11
      env: TEST_SUITE=coveralls
    - node_js: 0.11
      env: TEST_SUITE=lint
    - node_js: 0.12
      env: TEST_SUITE=coveralls
    - node_js: 0.12
      env: TEST_SUITE=lint
    - node_js: 5
      env: TEST_SUITE=coveralls
    - node_js: 5
      env: TEST_SUITE=lint
env:
  global:
    - CXX=g++-4.8
  matrix:
    - TEST_SUITE=coveralls
    - TEST_SUITE=lint
    - TEST_SUITE=test
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
script: "npm run $TEST_SUITE"
